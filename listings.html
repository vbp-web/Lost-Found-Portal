<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>All Reported Items</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 font-sans text-gray-800">
  <header class="bg-blue-600 text-white p-4 text-center text-2xl font-bold">
    Lost & Found Listings
  </header>

 <main class="p-6">
  <!-- Search Bar -->
  <div class="mb-6 max-w-xl mx-auto">
    <input
      type="text"
      id="searchInput"
      placeholder="Search by item name or location..."
      class="w-full p-3 border border-gray-300 rounded shadow focus:outline-none focus:ring-2 focus:ring-blue-400"
    />
  </div>

  <!-- Items Container -->
  <div id="itemsContainer" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
</main>


 <script>
  let lostItems = JSON.parse(localStorage.getItem("lostItems")) || [];
  let foundItems = JSON.parse(localStorage.getItem("foundItems")) || [];

  const itemsContainer = document.getElementById("itemsContainer");
  const searchInput = document.getElementById("searchInput");

  function createItemCard(item, type, index) {
    const card = document.createElement("div");
    card.className = "bg-white p-4 rounded shadow relative";

    const titleColor = type === "Lost" ? "text-yellow-600" : "text-green-600";

    card.innerHTML = `
      <h3 class="text-xl font-bold ${titleColor}">${type} Item: ${item.name}</h3>
      <p class="text-sm text-gray-600 mt-1">${item.date} at ${item.location}</p>
      <p class="mt-2 text-gray-700">${item.description}</p>
      ${item.image ? `<img src="${item.image}" alt="Item Image" class="mt-3 rounded border w-full h-48 object-cover"/>` : ''}
      <div class="flex justify-between mt-4">
        <button onclick="editItem('${type}', ${index})" class="text-blue-600 hover:text-blue-800 font-medium">✎ Edit</button>
        <button onclick="deleteItem('${type}', ${index})" class="text-red-600 hover:text-red-800 font-medium">✕ Delete</button>
      </div>
      <div class="mt-3 text-xs text-gray-400 italic">${type} Report</div>
    `;

    itemsContainer.appendChild(card);
  }

  function renderItems(filter = "") {
    itemsContainer.innerHTML = "";

    const allItems = [
      ...lostItems.map((item, i) => ({ ...item, type: "Lost", index: i })),
      ...foundItems.map((item, i) => ({ ...item, type: "Found", index: i }))
    ];

    const filteredItems = allItems.filter(item =>
      item.name.toLowerCase().includes(filter) ||
      item.location.toLowerCase().includes(filter)
    );

    filteredItems.forEach(item => createItemCard(item, item.type, item.index));
  }

  function deleteItem(type, index) {
    if (type === "Lost") {
      lostItems.splice(index, 1);
      localStorage.setItem("lostItems", JSON.stringify(lostItems));
    } else {
      foundItems.splice(index, 1);
      localStorage.setItem("foundItems", JSON.stringify(foundItems));
    }
    renderItems(searchInput.value.trim().toLowerCase());
  }

  function editItem(type, index) {
    const list = type === "Lost" ? lostItems : foundItems;
    const item = list[index];
    const name = prompt("Update Item Name:", item.name);
    const desc = prompt("Update Description:", item.description);
    const location = prompt("Update Location:", item.location);
    const date = prompt("Update Date:", item.date);

    if (name && desc && location && date) {
      list[index] = { ...item, name, description: desc, location, date };
      if (type === "Lost") {
        localStorage.setItem("lostItems", JSON.stringify(list));
      } else {
        localStorage.setItem("foundItems", JSON.stringify(list));
      }
      renderItems(searchInput.value.trim().toLowerCase());
    }
  }

  renderItems();

  searchInput.addEventListener("input", (e) => {
    const filter = e.target.value.trim().toLowerCase();
    renderItems(filter);
  });
</script>



</body>
</html>
